# ~/.profile - sourced by login shells (bash, sh, dash)
# Keep this POSIX-compliant for maximum compatibility

# Add local bin to PATH
[ -d "$HOME/.local/bin" ] && PATH="$HOME/.local/bin:$PATH"
[ -d "$HOME/bin" ] && PATH="$HOME/bin:$PATH"

# Homebrew (Linux)
[ -d /home/linuxbrew/.linuxbrew ] && eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
[ -d "$HOME/.linuxbrew" ] && eval "$("$HOME/.linuxbrew/bin/brew shellenv")"

# Homebrew (macOS)
[ -d /opt/homebrew ] && eval "$(/opt/homebrew/bin/brew shellenv)"

# pyenv
if [ -d "$HOME/.pyenv" ]; then
    export PYENV_ROOT="$HOME/.pyenv"
    PATH="$PYENV_ROOT/bin:$PATH"
    command -v pyenv >/dev/null && eval "$(pyenv init --path)"
fi

# Editor preference
if [ -n "$VSCODE_GIT_IPC_HANDLE" ] && command -v code >/dev/null 2>&1; then
    EDITOR="code --wait"
elif command -v nvim >/dev/null 2>&1; then
    EDITOR="nvim"
elif command -v vim >/dev/null 2>&1; then
    EDITOR="vim"
else
    EDITOR="vi"
fi
export EDITOR
export VISUAL="$EDITOR"

export PATH
